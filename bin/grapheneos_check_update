file_location="$HOME/.config/grapheneos_version_check"
version=$(curl https://grapheneos.org/releases 2>/dev/null | gawk 'match($0,/oriole-factory-([0-9]+)\.zip/,a){print a[1]}')

mkdir -p $file_location
cd $file_location

if [[ $PWD =~ "grapheneos_version_check" ]]; then
    printf "dir seems good\n"
else
    printf "wrong directory\n";
    exit
fi

if [ -e "$version" ]; then
	echo "$version already found";
else
	echo "$version not found";

	for file in $(ls)
	do
		echo "rm $file"
		rm $file
	done

	send_push "New GrapheneOS version" "$version"

	touch $version
fi

